import{u as _,b,r as x,j as e,C as g,R as F,d as E,F as l,B as c,e as S}from"./index-64dcebe6.js";import{F as j,a as f,b as u,c as w}from"./index-21da7072.js";import{S as N}from"./sweetalert2.esm.all-df3a4912.js";import{C as m}from"./Card-37aa5091.js";import"./iconBase-42b2867d.js";const P=()=>{const{t:a}=_(),s=b(n=>{var r;return(r=n.user)==null?void 0:r.user}),[v,o]=x.useState(!1),[i,d]=x.useState({full_name:(s==null?void 0:s.full_name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||""}),C=()=>{o(!0),d({full_name:(s==null?void 0:s.full_name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||""})},t=n=>{d({...i,[n.target.name]:n.target.value})},y=async n=>{var r,h;n.preventDefault();try{(await S.put(`http://localhost:4000/api/users/${s._id}`,i)).data.success&&(N.fire({icon:"success",title:a("profile.update_success"),showConfirmButton:!1,timer:1500}),o(!1))}catch(p){N.fire({icon:"error",title:a("profile.update_error"),text:((h=(r=p.response)==null?void 0:r.data)==null?void 0:h.message)||a("common.error_occurred")})}};return e.jsx(g,{className:"profile-container py-5",children:e.jsx(F,{className:"justify-content-center",children:e.jsx(E,{md:8,children:e.jsxs(m,{className:"profile-card",children:[e.jsx(m.Header,{className:"text-center",children:e.jsx("h2",{children:a("profile.title")})}),e.jsx(m.Body,{children:v?e.jsxs(l,{onSubmit:y,children:[e.jsxs(l.Group,{className:"mb-3",children:[e.jsxs(l.Label,{children:[e.jsx(j,{className:"me-2"}),a("profile.full_name")]}),e.jsx(l.Control,{type:"text",name:"full_name",value:i.full_name,onChange:t,required:!0})]}),e.jsxs(l.Group,{className:"mb-3",children:[e.jsxs(l.Label,{children:[e.jsx(f,{className:"me-2"}),a("profile.email")]}),e.jsx(l.Control,{type:"email",name:"email",value:i.email,onChange:t,required:!0})]}),e.jsxs(l.Group,{className:"mb-3",children:[e.jsxs(l.Label,{children:[e.jsx(u,{className:"me-2"}),a("profile.phone")]}),e.jsx(l.Control,{type:"tel",name:"phone",value:i.phone,onChange:t,required:!0})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx(c,{variant:"secondary",onClick:()=>o(!1),children:a("common.cancel")}),e.jsx(c,{variant:"primary",type:"submit",children:a("common.save")})]})]}):e.jsxs("div",{className:"profile-info",children:[e.jsxs("div",{className:"info-item",children:[e.jsx(j,{className:"icon"}),e.jsxs("div",{children:[e.jsx("h5",{children:a("profile.full_name")}),e.jsx("p",{children:s==null?void 0:s.full_name})]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx(f,{className:"icon"}),e.jsxs("div",{children:[e.jsx("h5",{children:a("profile.email")}),e.jsx("p",{children:s==null?void 0:s.email})]})]}),e.jsxs("div",{className:"info-item",children:[e.jsx(u,{className:"icon"}),e.jsxs("div",{children:[e.jsx("h5",{children:a("profile.phone")}),e.jsx("p",{children:s==null?void 0:s.phone})]})]}),e.jsx("div",{className:"text-end",children:e.jsxs(c,{variant:"primary",onClick:C,children:[e.jsx(w,{className:"me-2"}),a("common.edit")]})})]})})]})})})})};export{P as default};
