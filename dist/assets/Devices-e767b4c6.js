import{u as _,r as o,j as e,C as m,R as C,d as y,B as b,e as j}from"./index-64dcebe6.js";import{d as B,e as f,f as D,g as F,h as S}from"./index-21da7072.js";import{S as l}from"./sweetalert2.esm.all-df3a4912.js";import{C as d}from"./Card-37aa5091.js";import"./iconBase-42b2867d.js";const T=()=>{const{t:s}=_(),[r,x]=o.useState([]),[p,N]=o.useState(!0),[h,v]=o.useState(null),g=t=>{switch(t==null?void 0:t.toLowerCase()){case"desktop":return e.jsx(f,{});case"mobile":return e.jsx(S,{});case"tablet":return e.jsx(F,{});case"tv":return e.jsx(D,{});default:return e.jsx(f,{})}},u=async()=>{var t,a,c,i;try{v(null);const n=await j.get("http://localhost:4000/api/devices");x(n.data.devices||[])}catch(n){console.error("Error fetching devices:",n),v(((a=(t=n.response)==null?void 0:t.data)==null?void 0:a.message)||s("common.error_occurred")),x([]),l.fire({icon:"error",title:s("devices.fetch_error"),text:((i=(c=n.response)==null?void 0:c.data)==null?void 0:i.message)||s("common.error_occurred")})}finally{N(!1)}},w=async t=>{var a,c;try{(await l.fire({title:s("devices.confirm_remove"),text:s("devices.remove_warning"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#b81010",cancelButtonColor:"#6c757d",confirmButtonText:s("common.yes"),cancelButtonText:s("common.cancel")})).isConfirmed&&(await j.delete(`http://localhost:4000/api/devices/${t}`),await u(),l.fire({icon:"success",title:s("devices.remove_success"),showConfirmButton:!1,timer:1500}))}catch(i){l.fire({icon:"error",title:s("devices.remove_error"),text:((c=(a=i.response)==null?void 0:a.data)==null?void 0:c.message)||s("common.error_occurred")})}};return o.useEffect(()=>{u()},[]),p?e.jsx(m,{className:"devices-container",children:e.jsx("div",{className:"text-center py-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:s("common.loading")})})})}):h?e.jsx(m,{className:"devices-container",children:e.jsx("div",{className:"text-center py-5",children:e.jsx("div",{className:"alert alert-danger",role:"alert",children:h})})}):e.jsx(m,{className:"devices-container py-5",children:e.jsx(C,{className:"justify-content-center",children:e.jsx(y,{md:8,children:e.jsxs(d,{className:"devices-card",children:[e.jsxs(d.Header,{className:"text-center",children:[e.jsx("h2",{children:s("devices.title")}),e.jsx("p",{className:"text-muted mb-0",children:s("devices.subtitle")})]}),e.jsx(d.Body,{children:r.length===0?e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{children:s("devices.no_devices")})}):e.jsx("div",{className:"devices-list",children:r.map(t=>e.jsxs("div",{className:"device-item",children:[e.jsx("div",{className:"device-icon",children:g(t.type)}),e.jsxs("div",{className:"device-info",children:[e.jsx("h5",{children:t.name}),e.jsxs("p",{className:"device-details",children:[t.browser," â€¢ ",t.os]}),e.jsxs("p",{className:"device-time",children:[s("devices.last_active"),":"," ",new Date(t.lastActive).toLocaleDateString()]})]}),e.jsx(b,{variant:"danger",className:"remove-device",onClick:()=>w(t._id),children:e.jsx(B,{})})]},t._id))})}),e.jsx(d.Footer,{children:e.jsxs("p",{className:"text-muted mb-0",children:[s("devices.max_devices"),": ",(r==null?void 0:r.length)||0,"/5"]})})]})})})})};export{T as default};
